webpackJsonp([1],{"/lkP":function(t,e){},0:function(t,e){},"0MZo":function(t,e){},"3wPY":function(t,e){},"4Zbi":function(t,e){},"5qF1":function(t,e){},GLnt:function(t,e){},JGCa:function(t,e){},N7Ni:function(t,e){},NHnr:function(t,e,a){"use strict";function s(t){a("/lkP")}function i(t){a("ni6K")}function r(t){a("0MZo")}function n(t){a("WycM")}function o(t){a("GLnt")}function l(t){a("t8QQ")}function c(t){a("5qF1")}function m(t){a("N7Ni")}function u(t){a("v/q9")}function p(t){a("tcJ7")}function d(t){a("4Zbi")}function h(t){a("3wPY")}function f(t){a("rkIT")}function v(t){a("h3m5")}function g(t){a("JGCa")}Object.defineProperty(e,"__esModule",{value:!0});var b=a("qM1Q"),_=a("foln"),C=a("mwE6"),y=a.n(C),w=(a("cU5d"),{data:function(){return{activeIndex:"1",activeIndex2:"1"}},methods:{handleSelect:function(t,e){console.log(t,e)}}}),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top-bar p-f"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#242424","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[a("el-submenu",{staticClass:"top-bar-item",attrs:{index:"3"}},[a("template",{slot:"title"},[t._v("曹邦中")]),t._v(" "),a("el-menu-item",{staticClass:"logout-btn",attrs:{index:"2-1"}},[t._v("退出")])],2),t._v(" "),a("el-menu-item",{staticClass:"top-bar-item",attrs:{index:"2"}},[t._v("工单")]),t._v(" "),a("el-menu-item",{staticClass:"top-bar-item",attrs:{index:"1"}},[t._v("备案")])],1)],1)},x=[],k={render:F,staticRenderFns:x},$=k,I=a("8AGX"),S=s,P=I(w,$,!1,S,"data-v-1d36d3f5",null),z=P.exports,A={data:function(){return{isCollapse:!1}},computed:{openArr:function(){return console.log(this.$route.path),window.keyPath}},created:function(){this.$store.commit("changeSize")},mounted:function(){var t=this;window.onresize=function(){t.$store.commit("changeSize")}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},handelSelect:function(t,e){console.log(this.$route.path),console.log(t,e)},collapse:function(){this.isCollapse=!this.isCollapse,this.$emit("collapse",this.isCollapse)}}},D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slider p-f"},[a("div",{staticClass:"p-r"},[a("router-link",{staticClass:"logo ta-c c-p",class:t.isCollapse?"logoCollapse":"",attrs:{tag:"div",to:"home"}},[a("i",{staticClass:"fa fa-mixcloud icon-logo va-m"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapse,expression:"!isCollapse"}],staticClass:"text-logo va-m"},[t._v("NO Cloud")])]),t._v(" "),a("div",{staticClass:"collapse-btn p-a c-p ta-c",on:{click:t.collapse}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapse,expression:"!isCollapse"}],staticClass:"el-icon-d-arrow-left"}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],staticClass:"el-icon-d-arrow-right"})])],1),t._v(" "),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-openeds":t.openArr,"default-active":t.$route.path,"background-color":"#242424","text-color":"#fff","active-text-color":"#ffd04b",collapse:t.isCollapse,"unique-opened":"",router:""},on:{open:t.handleOpen,close:t.handleClose,select:t.handelSelect}},[a("el-menu-item",{attrs:{index:"/home"}},[a("i",{staticClass:"fa fa-home fa-fw slider-font",staticStyle:{"font-size":"18px"}}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("控制台首页")])]),t._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"fa fa-desktop fa-fw slider-font"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("云计算与网络")])]),t._v(" "),a("el-submenu",{attrs:{index:"2-1"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("云服务器")]),t._v(" "),a("el-menu-item",{attrs:{index:"/instance"}},[t._v("实例")]),t._v(" "),a("el-menu-item",{attrs:{index:"/disk"}},[t._v("硬盘")]),t._v(" "),a("el-menu-item",{attrs:{index:"/os"}},[t._v("快照")])],1)],2),t._v(" "),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"fa fa-dashboard fa-fw slider-font"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("监控")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/alarm"}},[t._v("告警规则")]),t._v(" "),a("el-menu-item",{attrs:{index:"/panel"}},[t._v("自定义面板")]),t._v(" "),a("el-menu-item",{attrs:{index:"/instanceGroup"}},[t._v("实例组管理")]),t._v(" "),a("el-menu-item",{attrs:{index:"/contacts"}},[t._v("联系人管理")])],2)],1)],1)},L=[],T={render:D,staticRenderFns:L},B=T,E=a("8AGX"),G=i,O=E(A,B,!1,G,"data-v-d3ab1a68",null),j=O.exports,R={data:function(){return{iscollapse:!1}},components:{topBar:z,slider:j},created:function(){"{{ route }}"!==window.url?window.url.split("/"):"/"!==location.pathname&&"/console"!==location.pathname&&"/console/"!==location.pathname||this.$router.push({name:"home"})},methods:{collapsePanel:function(t){this.iscollapse=t}}},V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("top-bar"),t._v(" "),a("slider",{on:{collapse:t.collapsePanel}}),t._v(" "),a("div",{staticClass:"content-panel",class:t.iscollapse?"collapsePanel":""},[a("router-view")],1)],1)},M=[],N={render:V,staticRenderFns:M},H=N,U=a("8AGX"),q=r,W=U(R,H,!1,q,null,null),X=W.exports,Z=a("zO6J"),J={},K=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"content"},[t._v("\n\tqqqqq\n")])},Q=[],Y={render:K,staticRenderFns:Q},tt=Y,et=a("8AGX"),at=et(J,tt,!1,null,null,null),st=at.exports,it={data:function(){var t=this;return{step:1,Chinesization:{availability_zone:"机房",vcpus:"CPU(核)",ram_mb:"内存(GB)",image:"操作系统",ephemeral_disk:"系统盘",ephemeral_disk_gb:"数据盘(GB)",name:"虚拟机名称",name_suffix_begin:"主机名后缀编号起始值",is_uneven:"是否集中创建",total:"创建数量",owner:"联系人",adminPass:"root密码",ippool_id:"ip池id",ip_addr_set:"候选ip地址列表"},isSetting:!0,ownerlist:[],owners:[],networkList:[],ipPool:[],ipInfo:{},isAvailable:!1,ruleForm:{availability_zone:"亦庄",vcpus:"1",ram_mb:"1",ephemeral_disk_gb:0,image:["Rhel","rhel-6.8-server_0817"],ephemeral_disk:"Rhel 12GB",name:"",name_suffix_begin:0,is_uneven:!1,total:1,owner:"",adminPass:""},rules:{availability_zone:[{required:!0,message:"请选择机房",trigger:"change"}],vcpus:[{required:!0,message:"请选择cpu",trigger:"change"}],ram_mb:[{required:!0,message:"请选择内存",trigger:"change"}],image:[{required:!0,message:"请选择操作系统",trigger:"change"}],ephemeral_disk_gb:[{required:!0,message:"请填写数据盘",trigger:"change"}],total:[{required:!0,message:"请输入创建数量",trigger:"change"}],owner:[{required:!0,message:"请选择联系人",trigger:"change"}],adminPass:[{required:!0,message:"请输入密码",trigger:"change"},{min:6,max:30,message:"长度在6到30个字符"}]},IPForm:{netWork:"",ippool_id:"",ips:"",total:1,ip_addr_set:[]},IPrules:{netWork:[{required:!0,message:"请选择网络",trigger:"change"}],ippool_id:[{required:!0,message:"请选择ip池",trigger:"change"}],total:[{validator:function(e,a,s){a>t.ipInfo.len?s(new Error("可用IP数量小于创建虚拟机数量!（请修改创建虚拟机数量或更换IP池）")):s()},trigger:"change"}]},allocMode:{ip_count:"指定数量",ip_addr:"指定地址",ip_range:"指定范围"},allocForm:{mode:"ip_count",ip_count:1,ip_addr:"",ip_range:""},allocRules:{ip_count:[{required:!0,message:"请输入所需IP数量",trigger:"change"}],ip_addr:[{required:!0,message:"请输入指定IP地址",trigger:"blur"},{pattern:/^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){4}$/,message:"请输入正确的IP地址"}],ip_range:[{required:!0,message:"请输入指定IP范围",trigger:"change"},{pattern:/^((((25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|[0-9])\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|[0-9]))\-(((25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|[0-9])\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|[0-9])))$/,message:"请输入正确的IP范围"}]},filterMethod:function(t,e){return e.value.indexOf(t)>-1},iplist:[],allocatedIps:[],isSelected:!1,messType:"success",mess:""}},created:function(){var t=this;this.$http.get("/auth/users").then(function(e){e.body.data.forEach(function(e,a){t.owners.push({label:e.label,email:e.email,value:e.id}),t.ownerlist=t.owners.slice(0)})})},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return console.log("error submit!!"),!1;if("ruleForm"===t)e.isSetting=!1,e.step=2,e.$http.get("/noec2/network").then(function(t){e.networkList=t.body.data});else if("IPForm"===t){var s={};for(var i in e.ruleForm)"phemeral_disk"!==i&&(s[i]="image"===i?e.ruleForm[i][1]:"owner"===i?e.ruleForm[i].value:"vcpus"===i?Number(e.ruleForm[i]):"ram_mb"===i?Number(e.ruleForm[i]):e.ruleForm[i]);for(var r in e.IPForm)"ippool_id"===r?s[r]=e.IPForm[r]:"ip_addr_set"===r&&e.IPForm[r].length&&(s[r]=e.IPForm[r]);var n=e.$createElement;e.$msgbox({title:"提示",message:n("p",null,[n("span",null,"即将创建虚拟机")]),showCancelButton:!0,showClose:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(t,a,i){"confirm"===t?(a.confirmButtonLoading=!0,a.confirmButtonText="执行中...",e.$http.post("/noec2/instances",{data:s},{headers:{"Content-Type":"x-www-form-urlencoded"}}).then(function(t){t.body.result;console.log(t),e.mess="虚拟机创建成功！",e.messType="success",a.confirmButtonLoading=!1,i()})):i()}}).then(function(t){e.$alert(e.mess,"提示",{confirmButtonText:"确定",type:e.messType,showClose:!1}),e.$emit("cancel-create","success")}).catch(function(t){e.$message({type:"info",message:"取消创建"})})}else if("allocForm"===t){e.iplist=[],e.allocatedIps=[],e.IPForm.ip_addr_set=[];var o=e.allocForm.mode,l={method:o,ippool_id:e.IPForm.ippool_id};"ip_count"===o?l.ip_count=e.allocForm[o]:"ip_addr"===o?l.ip_addr=e.allocForm[o]:l.ip_range=e.allocForm[o];var c=e.$createElement;e.$msgbox({title:"提示",message:c("p",null,[c("span",null,"即将分配IP ")]),showClose:!1,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(t,a,s){"confirm"===t?(a.confirmButtonLoading=!0,a.confirmButtonText="执行中...",e.$http.get("/noec2/ippools/allcIP").then(function(t){t.body.data.forEach(function(t,a){e.iplist.push({label:t,key:a,value:t})}),e.mess="IP分配成功！",e.messType="success",e.isSelected=!0,a.confirmButtonLoading=!1,s()})):s()}}).then(function(t){e.$message({type:e.messType,message:e.mess,customClass:"pop-mess",center:!0})}).catch(function(t){e.$message({type:"info",message:"取消分配"})})}})},changeOS:function(t){this.ruleForm.ephemeral_disk=t[0]+" 12GB"},changeName:function(t){t||(this.ruleForm.name_suffix_begin=0)},alterTotal:function(t){this.IPForm.total=t},ownerFilter:function(t){this.ownerlist=this.owners.filter(function(e){return e.label.indexOf(t)>-1||e.email.indexOf(t)>-1})},generatePass:function(){for(var t="abcdefghjkmnpqrstuvwxyzABCDEFGHJKMNPQRSTUVWXYZ23456789.*?&%+!@#$^=><",e="",a=0,s=t.length;a<9;++a)e+=t.charAt(Math.floor(Math.random()*s));this.ruleForm.adminPass=e},backSetting:function(){this.isSetting=!0,this.step=1},cancel:function(){this.$emit("cancel-create",!1)},changeNetwork:function(t){var e=this;this.IPForm.ippool_id="",this.isAvailable=!1,this.$http.get("/noec2/ippools").then(function(a){e.ipPool=a.body.data[t]})},changeIPpool:function(t){var e=this;this.isAvailable=!1,this.allocForm.mode="ip_count",this.allocForm.ip_count=1,this.iplist=[],this.allocatedIps=[],this.IPForm.ip_addr_set=[],this.$http.get("/noec2/ippools",{params:{ippool_id:t}}).then(function(t){e.ipInfo=t.body.data,e.IPForm.ips=e.ipInfo.items,e.isAvailable=!0})},changeAllocType:function(){this.isSelected=!1,this.iplist=[],this.allocatedIps=[],this.IPForm.ip_addr_set=[]},changeAllocated:function(){this.IPForm.ip_addr_set=[];for(var t=0;t<this.allocatedIps.length;t++)this.IPForm.ip_addr_set.push(this.iplist[this.allocatedIps[t]].value)}}},rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createPanel"},[a("div",{staticClass:"steps"},[a("el-steps",{attrs:{active:t.step,"finish-status":"finish",simple:""}},[a("el-step",{attrs:{title:"选择配置",icon:"el-icon-setting"}}),t._v(" "),a("el-step",{attrs:{title:"选择IP",icon:"el-icon-tickets"}})],1)],1),t._v(" "),a("div",{staticClass:"createCont o-h"},[a("div",{staticClass:"createInfo f-r"},[a("p",{staticClass:"title"},[t._v("创建云主机信息")]),t._v(" "),a("div",{staticClass:"info"},[t._l(t.ruleForm,function(e,s){return a("div",[a("p",{directives:[{name:"show",rawName:"v-show",value:(e||0===e)&&"owner"!==s&&"name_suffix_begin"!==s,expression:"(item||item===0)&&key!=='owner'&&key!=='name_suffix_begin'"}],staticClass:"row-info"},[a("label",[t._v(t._s(t.Chinesization[s])+":")]),t._v(" "),a("span",{staticClass:"info-cont"},[t._v(t._s("image"===s?e[1]:e))])]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:(e||0===e)&&"owner"===s,expression:"(item||item===0)&&key==='owner'"}],staticClass:"row-info"},[a("label",[t._v(t._s(t.Chinesization[s])+":")]),t._v(" "),a("span",{staticClass:"info-cont"},[t._v(t._s(e.label))])]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e&&"name_suffix_begin"===s,expression:"item&&key==='name_suffix_begin'"}],staticClass:"row-info"},[a("label",[t._v(t._s(t.Chinesization[s])+":")]),t._v(" "),a("span",{staticClass:"info-cont"},[t._v(t._s(e))])])])}),t._v(" "),t._l(t.IPForm,function(e,s){return a("div",[a("p",{directives:[{name:"show",rawName:"v-show",value:e&&"ippool_id"===s,expression:"item&&key==='ippool_id'"}],staticClass:"row-info"},[a("label",[t._v(t._s(t.Chinesization[s])+":")]),t._v(" "),a("span",{staticClass:"info-cont"},[t._v(t._s(e))])]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.length&&"ip_addr_set"===s,expression:"item.length&&key==='ip_addr_set'"}],staticClass:"row-info"},[a("label",[t._v(t._s(t.Chinesization[s])+":")]),t._v(" "),a("span",{staticClass:"info-cont"},[t._v(t._s(e))])])])})],2),t._v(" "),a("div",{staticClass:"btns ta-c"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isSetting,expression:"!isSetting"}],attrs:{type:"primary",plain:""},on:{click:t.backSetting}},[t._v("上一步")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isSetting,expression:"isSetting"}],attrs:{type:"success",plain:""},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("下一步")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isSetting,expression:"!isSetting"}],attrs:{type:"danger",plain:""},on:{click:function(e){t.submitForm("IPForm")}}},[a("i",{staticClass:"fa fa-gear"}),t._v(" "),a("span",[t._v("创 建")])]),t._v(" "),a("el-button",{attrs:{type:"info",plain:""},on:{click:t.cancel}},[t._v("取 消")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isSetting,expression:"isSetting"}],staticClass:"Settingform form f-l"},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:t.$store.state.Size,"label-position":"left"}},[a("el-form-item",{attrs:{label:"机房",prop:"availability_zone"}},[a("el-radio-group",{model:{value:t.ruleForm.availability_zone,callback:function(e){t.$set(t.ruleForm,"availability_zone",e)},expression:"ruleForm.availability_zone"}},[a("el-radio-button",{attrs:{label:"亦庄"}}),t._v(" "),a("el-radio-button",{attrs:{label:"北显"}}),t._v(" "),a("el-radio-button",{attrs:{label:"MIS-1"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"CPU",prop:"vcpus"}},[a("el-radio-group",{model:{value:t.ruleForm.vcpus,callback:function(e){t.$set(t.ruleForm,"vcpus",t._n(e))},expression:"ruleForm.vcpus"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("1核")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("2核")]),t._v(" "),a("el-radio-button",{attrs:{label:"4"}},[t._v("4核")]),t._v(" "),a("el-radio-button",{attrs:{label:"8"}},[t._v("8核")]),t._v(" "),a("el-radio-button",{attrs:{label:"12"}},[t._v("12核")]),t._v(" "),a("el-radio-button",{attrs:{label:"16"}},[t._v("16核")]),t._v(" "),a("el-radio-button",{attrs:{label:"24"}},[t._v("24核")]),t._v(" "),a("el-radio-button",{attrs:{label:"32"}},[t._v("32核")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"内存",prop:"ram_mb"}},[a("el-radio-group",{model:{value:t.ruleForm.ram_mb,callback:function(e){t.$set(t.ruleForm,"ram_mb",t._n(e))},expression:"ruleForm.ram_mb"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("1GB")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("2GB")]),t._v(" "),a("el-radio-button",{attrs:{label:"4"}},[t._v("4GB")]),t._v(" "),a("el-radio-button",{attrs:{label:"8"}},[t._v("8GB")]),t._v(" "),a("el-radio-button",{attrs:{label:"16"}},[t._v("16GB")]),t._v(" "),a("el-radio-button",{attrs:{label:"24"}},[t._v("24GB")]),t._v(" "),a("el-radio-button",{attrs:{label:"32"}},[t._v("32GB")]),t._v(" "),a("el-radio-button",{attrs:{label:"48"}},[t._v("48GB")]),t._v(" "),a("el-radio-button",{attrs:{label:"64"}},[t._v("64GB")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"数据盘",prop:"ephemeral_disk_gb"}},[a("el-input-number",{attrs:{min:0,max:1500},model:{value:t.ruleForm.ephemeral_disk_gb,callback:function(e){t.$set(t.ruleForm,"ephemeral_disk_gb",e)},expression:"ruleForm.ephemeral_disk_gb"}}),t._v(" "),a("span",[t._v("GB")])],1),t._v(" "),a("el-form-item",{attrs:{label:"操作系统",prop:"image",size:"medium"}},[a("el-cascader",{staticClass:"long-item",attrs:{options:t.$store.state.osType,"show-all-levels":!1,"expand-trigger":"hover"},on:{change:t.changeOS},model:{value:t.ruleForm.image,callback:function(e){t.$set(t.ruleForm,"image",e)},expression:"ruleForm.image"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"系统盘"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",readonly:!0},model:{value:t.ruleForm.ephemeral_disk,callback:function(e){t.$set(t.ruleForm,"ephemeral_disk",e)},expression:"ruleForm.ephemeral_disk"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"创建数量",prop:"total"}},[a("el-input-number",{attrs:{min:1,max:500},on:{change:t.alterTotal},model:{value:t.ruleForm.total,callback:function(e){t.$set(t.ruleForm,"total",e)},expression:"ruleForm.total"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"owner"}},[a("el-select",{staticClass:"long-item",attrs:{filterable:"",clearable:"","filter-method":t.ownerFilter,placeholder:"请输入联系人"},model:{value:t.ruleForm.owner,callback:function(e){t.$set(t.ruleForm,"owner",e)},expression:"ruleForm.owner"}},t._l(t.ownerlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e}},[a("span",{staticClass:"f-l"},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticClass:"f-r",staticStyle:{color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email.split("@")[0]))])])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"root密码",prop:"adminPass"}},[a("el-input",{staticClass:"long-item",attrs:{placeholder:"请输入root密码"},model:{value:t.ruleForm.adminPass,callback:function(e){t.$set(t.ruleForm,"adminPass","string"==typeof e?e.trim():e)},expression:"ruleForm.adminPass"}}),t._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:t.generatePass}},[t._v("自动生成")])],1),t._v(" "),a("el-form-item",{attrs:{label:"虚拟机名称"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入虚拟机名称"},on:{change:t.changeName},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name","string"==typeof e?e.trim():e)},expression:"ruleForm.name"}})],1),t._v(" "),t.ruleForm.name?a("el-form-item",{attrs:{label:"起始编号"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.ruleForm.name_suffix_begin,callback:function(e){t.$set(t.ruleForm,"name_suffix_begin",e)},expression:"ruleForm.name_suffix_begin"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"是否集中创建"}},[a("el-checkbox",{model:{value:t.ruleForm.is_uneven,callback:function(e){t.$set(t.ruleForm,"is_uneven",e)},expression:"ruleForm.is_uneven"}},[t._v("是否集中")])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSetting,expression:"!isSetting"}],staticClass:"Ipform form f-l"},[a("el-form",{ref:"IPForm",attrs:{model:t.IPForm,rules:t.IPrules,"label-width":"80px",size:t.$store.state.Size,"label-position":"left"}},[a("el-form-item",{attrs:{label:"网络",prop:"netWork"}},[a("el-select",{staticClass:"long-item",attrs:{placeholder:"请选择网络"},on:{change:t.changeNetwork},model:{value:t.IPForm.netWork,callback:function(e){t.$set(t.IPForm,"netWork",e)},expression:"IPForm.netWork"}},t._l(t.networkList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"IP池",prop:"ippool_id"}},[a("el-select",{staticClass:"long-item",attrs:{placeholder:"请选择IP池"},on:{change:t.changeIPpool},model:{value:t.IPForm.ippool_id,callback:function(e){t.$set(t.IPForm,"ippool_id",e)},expression:"IPForm.ippool_id"}},t._l(t.ipPool,function(t){return a("el-option",{key:t.id,attrs:{label:t.availability_zone.name+" : "+t.first_ip+"-"+t.last_ip,value:t.id}})}))],1),t._v(" "),t.isAvailable?a("el-form-item",{attrs:{label:"可用IP",prop:"ips"}},[a("div",{staticClass:"ips-label d-ib va-t"},[a("span",{staticClass:"Number"},[t._v("("+t._s(t.ipInfo.len)+"个)")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.ipInfo.len,expression:"ipInfo.len"}],staticClass:"d-ib va-m ips-content"},t._l(t.ipInfo.items,function(e){return a("p",[t._v(t._s(e))])})),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.ipInfo.len,expression:"!ipInfo.len"}],staticClass:"d-ib va-m ips-content"},[a("p",[t._v("没有可用的IP")])])]):t._e(),t._v(" "),t.isAvailable?a("el-form-item",{attrs:{label:"创建数量",prop:"total"}},[a("el-input-number",{attrs:{min:1,max:500,disabled:!0},model:{value:t.IPForm.total,callback:function(e){t.$set(t.IPForm,"total",e)},expression:"IPForm.total"}})],1):t._e(),t._v(" "),t.isAvailable&&t.ipInfo.len>0?a("el-collapse",{staticStyle:{width:"600px"}},[a("el-collapse-item",[a("template",{slot:"title"},[t._v("\n\t\t\t\t\t      高级选项"),a("i",{staticClass:"header-icon el-icon-info"})]),t._v(" "),a("el-form",{ref:"allocForm",attrs:{model:t.allocForm,rules:t.allocRules,"label-width":"100px",size:t.$store.state.Size,"label-position":"left"}},[a("el-form-item",{attrs:{label:"IP分配方式"}},[a("el-select",{staticClass:"long-item",attrs:{placeholder:"请选择IP池"},on:{change:t.changeAllocType},model:{value:t.allocForm.mode,callback:function(e){t.$set(t.allocForm,"mode",e)},expression:"allocForm.mode"}},t._l(t.allocMode,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1),t._v(" "),"ip_count"===t.allocForm.mode?a("el-form-item",{attrs:{label:"指定数量",prop:"ip_count"}},[a("el-input-number",{staticClass:"long-item",attrs:{min:1,max:t.ipInfo.len},model:{value:t.allocForm.ip_count,callback:function(e){t.$set(t.allocForm,"ip_count",e)},expression:"allocForm.ip_count"}})],1):t._e(),t._v(" "),"ip_addr"===t.allocForm.mode?a("el-form-item",{attrs:{label:"指定IP地址",prop:"ip_addr"}},[a("el-input",{staticClass:"long-item",attrs:{placeholder:"请输入指定IP地址"},model:{value:t.allocForm.ip_addr,callback:function(e){t.$set(t.allocForm,"ip_addr",e)},expression:"allocForm.ip_addr"}})],1):t._e(),t._v(" "),"ip_range"===t.allocForm.mode?a("el-form-item",{attrs:{label:"指定IP范围",prop:"ip_range"}},[a("el-input",{staticClass:"long-item",attrs:{placeholder:"请输入指定IP范围"},model:{value:t.allocForm.ip_range,callback:function(e){t.$set(t.allocForm,"ip_range",e)},expression:"allocForm.ip_range"}})],1):t._e(),t._v(" "),a("div",{staticClass:"alloc-btn ta-r"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isSetting,expression:"!isSetting"}],attrs:{type:"success",plain:""},on:{click:function(e){t.submitForm("allocForm")}}},[a("i",{staticClass:"fa fa-wrench"}),t._v(" "),a("span",[t._v("分配IP")])])],1),t._v(" "),t.isSelected?a("el-transfer",{staticClass:"ip-transfer",attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入IP",titles:["可用IP列表","已选择IP列表"],data:t.iplist},on:{change:t.changeAllocated},model:{value:t.allocatedIps,callback:function(e){t.allocatedIps=e},expression:"allocatedIps"}}):t._e()],1)],2)],1):t._e()],1)],1)])])},nt=[],ot={render:rt,staticRenderFns:nt},lt=ot,ct=a("8AGX"),mt=n,ut=ct(it,lt,!1,mt,"data-v-f9021716",null),pt=ut.exports,dt={components:{createInstance:pt},data:function(){return{isCreate:!1,searchValue:"",isEnabled:!1,pageSize:25,currentPage:1,opts:[25,100,200,1e4],Mess:"",MessType:"success",select_arr:[],len:0,popTitle:"",dialogVisible:!1,isEdit:!1,image:[],objArr:[],objImage:"",owners:[],ownerlist:[],editForm:{created_by:{value:"cbz",label:"曹邦中",eamil:"bangzhongcao@sohu-inc.com"},status:"",name:"",contact:{value:"zfx",label:"张丰祥",eamil:"fengxiangzhang@sohu-inc.com"}},editRules:{name:[{required:!0,message:"请输入云主机名称",trigger:"change"}]},isSettingColumn:!1,setColumn:{name:!0,first_ip:!0,project:!0,created_by:!1,host:!0,power_state:!0,volumes:!1,image:!0,status:!0,flavor:!0,availability_zone:!1,created:!0},temporaryList:{}}},computed:{CurrentData:function(){var t=(this.currentPage-1)*this.pageSize,e=this.currentPage*this.pageSize;return this.$store.state.tableData.length<e?this.$store.state.tableData.slice(t):this.$store.state.tableData.slice(t,e)},itemCount:function(){return this.$store.state.tableData.length}},created:function(){var t=this;this.$http.get("/noec2/instances").then(function(e){var a=e.body.data;t.$store.commit("changeData",a),t.$http.get("/auth/users").then(function(e){e.body.data.forEach(function(e,a){t.owners.push({label:e.label,email:e.email,value:e.id}),t.ownerlist=t.owners.slice(0)})})})},methods:{sortChange:function(t){this.$store.commit("sortChange",t)},changePage:function(t){this.currentPage=t,window.scrollTo(0,0)},changePageSize:function(t){this.pageSize=t,this.currentPage=1,window.scrollTo(0,0)},selectChange:function(t){this.select_arr=t,this.len=t.length,this.len?this.isEnabled=!0:this.isEnabled=!1},formatter:function(t,e){return t.address},changeVisible:function(t,e){this.objArr=[],this.objArr.push(e),this.objImage=e.image},moreOperates:function(t){"restart"===t&&this.operate(t,this.select_arr)},singleOperates:function(t){"rebuild"===t?(this.image=[],this.isEdit=!1,this.popTitle="重装系统",this.dialogVisible=!0):"edit"===t?(this.isEdit=!0,this.editForm.status="ACTIVE",this.editForm.name=this.objArr[0].name,this.popTitle="编辑云主机",this.dialogVisible=!0):"console"===t?console.log(t):this.operate(t,this.objArr)},ownerFilter:function(t){this.ownerlist=this.owners.filter(function(e){return e.label.indexOf(t)>-1||e.email.indexOf(t)>-1})},submitDialog:function(t){var e=this;t?this.$refs[t].validate(function(t){if(t){var a={};for(var s in e.editForm)a[s]="created_by"===s||"contact"===s?e.editForm[s].value:e.editForm[s];e.$http.patch("/noec2/instances/1001",{data:a}).then(function(t){e.$http.get("/noec2/instances").then(function(t){e.$store.state.listData=t.body.data,e.$store.state.tableData=e.$store.state.listData.slice(0),e.dialogVisible=!1})})}}):this.image.length&&(this.objArr[0].image=this.image[1],this.dialogVisible=!1)},refresh:function(){var t=this;this.$http.get("/noec2/instances").then(function(e){t.searchValue="",t.currentPage=1;var a=e.body.data;t.$store.commit("changeData",a)})},settingColumn:function(){for(var t in this.setColumn)this.$set(this.temporaryList,t,this.setColumn[t]);this.isSettingColumn=!0},cancelColumn:function(){this.isSettingColumn=!1,this.temporaryList={};for(var t in this.setColumn)this.$set(this.temporaryList,t,this.setColumn[t])},confirmColumn:function(){this.isSettingColumn=!1,this.setColumn={};for(var t in this.temporaryList)this.$set(this.setColumn,t,this.temporaryList[t])},createInstance:function(){this.isCreate=!0},CancleCreate:function(t){"success"===t&&this.refresh(),this.isCreate=!1},operate:function(t,e){var a=this,s="",i="";"start"===t?(s="开机",i="#67C23A"):"shutdown"===t?(s="关机",i="#909399"):"delete"===t?(s="删除(虚拟机删除后将无法找回！)",i="#F56C6C"):"restart"===t&&(s="重启",i="#E6A23C");var r=this.$createElement,n=[];for(var o in e)n.push(r("span",{style:"color: teal;margin-right:10px"},e[o].name));this.$msgbox({title:"提示",message:r("p",null,[r("span",null,"即将对以下实例："),r("p",{style:"word-wrap: break-word;overflow: hidden"},n),r("span",null,"进行"),r("strong",{style:"margin-left:5px;font-size:15px;color: "+i},s)]),showCancelButton:!0,showClose:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(i,r,n){if("confirm"===i)if(r.confirmButtonLoading=!0,r.confirmButtonText="执行中...",a.len<=1){var o={};if("delete"===t)a.$http.delete("/noec2/instances/1001").then(function(t){t.body.result;a.mess="所选择的虚拟机"+s+"成功！",a.messType="success",r.confirmButtonLoading=!1,n()});else{var o={action:t};a.$http.post("/noec2/instances/1001",{data:o}).then(function(t){t.body.result;a.mess="所选择的虚拟机"+s+"成功！",a.messType="success",r.confirmButtonLoading=!1,n()})}}else{for(var l={action:"start",object_ids:[]},c=0;c<e.length;c++)l.object_ids.push(e[c].id);a.$http.post("/noec2/instances/batch/",{data:l}).then(function(t){t.body.result;a.mess="所选择的虚拟机"+s+"成功！",a.messType="success",r.confirmButtonLoading=!1,n()})}else n()}}).then(function(t){a.$alert(a.mess,"提示",{confirmButtonText:"确定",type:a.messType,showClose:!1})}).catch(function(){a.$message({type:"info",customClass:"pop-mess",message:"已取消操作",duration:700})})}}},ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"instance"},[t.isCreate?t._e():a("div",{staticClass:"list"},[a("div",{staticClass:"btn-group"},[a("el-button",{staticClass:"f-l",attrs:{type:"primary",icon:"fa fa-plus",plain:""},on:{click:t.createInstance}},[t._v(" 创建实例")]),t._v(" "),a("el-button-group",{staticClass:"f-l operate-btns"},[a("el-button",{attrs:{type:"success",icon:"fa fa-power-off",disabled:!t.isEnabled,plain:""},on:{click:function(e){t.operate("start",t.select_arr)}}},[t._v(" 开机")]),t._v(" "),a("el-button",{attrs:{type:"warning",icon:"fa fa-circle",disabled:!t.isEnabled,plain:""},on:{click:function(e){t.operate("shutdown",t.select_arr)}}},[t._v(" 关机")]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"fa fa-trash-o",disabled:!t.isEnabled,plain:""},on:{click:function(e){t.operate("delete",t.select_arr)}}},[t._v(" 删除")])],1),t._v(" "),a("el-dropdown",{staticClass:"f-l dorpdown-btn",on:{command:t.moreOperates}},[a("el-button",{attrs:{type:"info",icon:"fa fa-cogs",disabled:!t.isEnabled,plain:""}},[t._v(" 更多操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"restartItem",attrs:{command:"restart"}},[t._v("重启")])],1)],1),t._v(" "),a("div",{staticClass:"table-btn f-r"},[a("el-button",{attrs:{icon:"fa fa-refresh",title:"全部刷新"},on:{click:t.refresh}}),t._v(" "),a("el-button",{attrs:{icon:"fa fa-cog",title:"设置字表列段"},on:{click:t.settingColumn}})],1),t._v(" "),a("div",{staticClass:"search f-r p-r"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{type:"text",placeholder:"请输入内容"},domProps:{value:t.searchValue},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$store.commit("handleSearch",t.searchValue)},input:[function(e){e.target.composing||(t.searchValue=e.target.value)},function(e){t.$store.commit("emptySearch",t.searchValue)}]}}),t._v(" "),a("el-button",{staticClass:"search-btn p-a",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.$store.commit("handleSearch",t.searchValue)}},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{attrs:{border:"",data:t.CurrentData},on:{"sort-change":t.sortChange,"selection-change":t.selectChange}},[a("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),t._v(" "),t.setColumn.name?a("el-table-column",{key:"name",attrs:{prop:"name",label:"名称",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-refresh",attrs:{title:"刷新"}})]),t._v(" "),a("span",[t._v(t._s(e.row.name))])]}}])}):t._e(),t._v(" "),t.setColumn.first_ip?a("el-table-column",{key:"first_ip",attrs:{prop:"first_ip",label:"IP",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.project?a("el-table-column",{key:"project",attrs:{prop:"project",label:"项目",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.created_by?a("el-table-column",{key:"created_by",attrs:{prop:"created_by",label:"创建者",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.host?a("el-table-column",{key:"host",attrs:{prop:"host",label:"宿主机",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.power_state?a("el-table-column",{key:"power_state",attrs:{prop:"power_state",label:"电源",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.volumes?a("el-table-column",{key:"volumes",attrs:{label:"存储卷"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("姓名: "+t._s(e.row.volumes))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{staticClass:"name-wrapper",attrs:{size:"medium"}},[t._v(t._s(e.row.volumes))])],1)])]}}])}):t._e(),t._v(" "),t.setColumn.image?a("el-table-column",{key:"image",attrs:{prop:"image",label:"镜像",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.status?a("el-table-column",{key:"status",attrs:{prop:"status",label:"状态",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.flavor?a("el-table-column",{key:"flavor",attrs:{prop:"flavor",label:"类型",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.availability_zone?a("el-table-column",{key:"availability_zone",attrs:{prop:"availability_zone",label:"机房",sortable:"custom"}}):t._e(),t._v(" "),t.setColumn.created?a("el-table-column",{key:"created",attrs:{label:"创建时间",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",[t._v(t._s(e.row.created))])]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{placement:"bottom"},on:{command:t.singleOperates,"visible-change":function(a){t.changeVisible(e.$index,e.row)}}},[a("el-button",{attrs:{type:"danger",plain:"",size:"small"}},[t._v("\n\t\t\t\t\t\t\t\t\t操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"console"}},[a("a",{staticStyle:{color:"#a4da89"},attrs:{href:"/instances/a640a1c3-a56b-427e-9b2c-7821688a262b/console",target:"_blank"}},[t._v("控制台")])]),t._v(" "),a("el-dropdown-item",{attrs:{command:"start"}},[t._v("开机")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"shutdown"}},[t._v("关机")]),t._v(" "),a("el-dropdown-item",{staticStyle:{color:"#f9a7a7"},attrs:{command:"delete"}},[t._v("删除")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"restart"}},[t._v("重启")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"rebuild"}},[t._v("重装系统")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"edit"}},[a("i",{staticClass:"fa fa-edit"}),t._v("编辑")])],1)],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1)]),t._v(" "),t.isCreate?a("div",{staticClass:"createInstance"},[a("create-instance",{on:{"cancel-create":t.CancleCreate}})],1):t._e(),t._v(" "),a("el-dialog",{staticClass:"pop-dialog",attrs:{title:t.popTitle,visible:t.dialogVisible,width:"30%","show-close":!1,center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.isEdit?t._e():a("div",[a("p",{staticClass:"text-dialog"},[a("span",[t._v("当前云主机的操作系统为:")]),a("strong",[t._v(t._s(t.objImage))])]),t._v(" "),t.isEdit?t._e():a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:t.$store.state.osType,"show-all-levels":!1,"expand-trigger":"hover",placeholder:"请选择要重装的操作系统"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1),t._v(" "),t.isEdit?a("div",[a("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.editRules,size:"medium","label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"创建者"}},[a("el-select",{staticClass:"dialog-item",attrs:{filterable:"",clearable:"","filter-method":t.ownerFilter,placeholder:"请选择创建者"},model:{value:t.editForm.created_by,callback:function(e){t.$set(t.editForm,"created_by",e)},expression:"editForm.created_by"}},t._l(t.ownerlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e}},[a("span",{staticClass:"f-l"},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticClass:"f-r",staticStyle:{color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email.split("@")[0]))])])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editForm.status,callback:function(e){t.$set(t.editForm,"status",e)},expression:"editForm.status"}},t._l(t.$store.state.Status,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"云主机名称",prop:"name"}},[a("el-input",{staticClass:"dialog-item",attrs:{placeholder:"请输入云主机名称"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name","string"==typeof e?e.trim():e)},expression:"editForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人"}},[a("el-select",{staticClass:"dialog-item",attrs:{filterable:"",clearable:"","filter-method":t.ownerFilter,placeholder:"请选择联系人"},model:{value:t.editForm.contact,callback:function(e){t.$set(t.editForm,"contact",e)},expression:"editForm.contact"}},t._l(t.ownerlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e}},[a("span",{staticClass:"f-l"},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticClass:"f-r",staticStyle:{color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email.split("@")[0]))])])}))],1)],1)],1):t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),t.isEdit?t._e():a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDialog()}}},[t._v("确 定")]),t._v(" "),t.isEdit?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDialog("editForm")}}},[t._v("确 定")]):t._e()],1)]),t._v(" "),a("el-dialog",{attrs:{title:"设置表格列",visible:t.isSettingColumn,"show-close":!1,width:"30%"},on:{"update:visible":function(e){t.isSettingColumn=e}}},[a("div",[a("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.name,callback:function(e){t.$set(t.temporaryList,"name",e)},expression:"temporaryList.name"}},[t._v("名称")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.first_ip,callback:function(e){t.$set(t.temporaryList,"first_ip",e)},expression:"temporaryList.first_ip"}},[t._v("IP")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.project,callback:function(e){t.$set(t.temporaryList,"project",e)},expression:"temporaryList.project"}},[t._v("项目")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.created_by,callback:function(e){t.$set(t.temporaryList,"created_by",e)},expression:"temporaryList.created_by"}},[t._v("创建者")])],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.host,callback:function(e){t.$set(t.temporaryList,"host",e)},expression:"temporaryList.host"}},[t._v("宿主机")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.power_state,callback:function(e){t.$set(t.temporaryList,"power_state",e)},expression:"temporaryList.power_state"}},[t._v("电源")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.volumes,callback:function(e){t.$set(t.temporaryList,"volumes",e)},expression:"temporaryList.volumes"}},[t._v("存储卷")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.image,callback:function(e){t.$set(t.temporaryList,"image",e)},expression:"temporaryList.image"}},[t._v("镜像")])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.status,callback:function(e){t.$set(t.temporaryList,"status",e)},expression:"temporaryList.status"}},[t._v("状态")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.flavor,callback:function(e){t.$set(t.temporaryList,"flavor",e)},expression:"temporaryList.flavor"}},[t._v("类型")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.availability_zone,callback:function(e){t.$set(t.temporaryList,"availability_zone",e)},expression:"temporaryList.availability_zone"}},[t._v("机房")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.temporaryList.created,callback:function(e){t.$set(t.temporaryList,"created",e)},expression:"temporaryList.created"}},[t._v("创建时间")])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelColumn}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmColumn}},[t._v("确 定")])],1)])],1)},ft=[],vt={render:ht,staticRenderFns:ft},gt=vt,bt=a("8AGX"),_t=o,Ct=bt(dt,gt,!1,_t,"data-v-40e20786",null),yt=Ct.exports,wt=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"disk"},[t._v("\n\tdisk\n")])},Ft=[],xt={render:wt,staticRenderFns:Ft},kt=xt,$t=a("8AGX"),It=$t(null,kt,!1,null,null,null),St=It.exports,Pt=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"os"},[t._v("\n\tos\n")])},zt=[],At={render:Pt,staticRenderFns:zt},Dt=At,Lt=a("8AGX"),Tt=Lt(null,Dt,!1,null,null,null),Bt=Tt.exports,Et={},Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tactics-table"},[a("div",{staticClass:"tactics-head"},[t._t("table-header")],2),t._v(" "),a("div",{staticClass:"tactics-body"},[t._t("table-body")],2)])},Ot=[],jt={render:Gt,staticRenderFns:Ot},Rt=jt,Vt=a("8AGX"),Mt=l,Nt=Vt(Et,Rt,!1,Mt,"data-v-704ef1e6",null),Ht=Nt.exports,Ut={props:["instanceList","isAlter","hostsgroupInfo"],data:function(){return{instances:[],list:[],hostId:"",HostGroupsForm:{name:""},HostGroupsRules:{name:[{required:!0,message:"请输入实例组名称",trigger:"change"}]}}},mounted:function(){var t=this;this.instanceList.forEach(function(e,a){var s=e.first_ip+" ("+e.name+")";t.list.push({label:s,key:e.first_ip})}),this.hostsgroupInfo.hosts&&(this.hostId=this.hostsgroupInfo.hostgroup.id,this.HostGroupsForm.name=this.hostsgroupInfo.hostgroup.name,this.instances=this.hostsgroupInfo.hosts.slice(0))},methods:{popMess:function(t){var e=this,a=this.$createElement,s=this;console.log(t.data),this.$msgbox({title:"提示",message:a("p",null,[a("span",null,t.tip),a("i",{style:"color: teal"},this.HostGroupsForm.name)]),showClose:!1,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(a,i,r){if("confirm"===a){i.confirmButtonLoading=!0,i.confirmButtonText="执行中...";var n;"edit"===t.operate?n=function(){return s.$http.put(t.url,t.data)}:"create"===t.operate&&(n=function(){return s.$http.post(t.url,t.data)}),n().then(function(a){e.$emit("create-hosts",a.body.data),e.mess=t.mess,e.messType="success",i.confirmButtonLoading=!1,r()})}else r()}}).then(function(t){e.$message({type:e.messType,message:e.mess,customClass:"pop-mess",center:!0})}).catch(function(a){e.$message({type:"info",message:t.cancelTip})})},createHosts:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;if(e.isAlter){var a={operate:"edit",url:"/monitor/hostgroups/1/",data:{name:e.HostGroupsForm.name,hosts:e.instances},tip:"即将修改实例组",mess:"实例组修改成功！",cancelTip:"取消修改"};e.popMess(a)}else{var a={operate:"create",url:"/monitor/hostgroups/",data:{name:e.HostGroupsForm.name,hosts:e.instances},tip:"即将创建实例组",mess:"实例组创建成功！",cancelTip:"取消创建"};e.popMess(a)}})}}},qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createHostGroups"},[a("el-form",{ref:"HostGroupsForm",staticClass:"HostGroupsForm",attrs:{model:t.HostGroupsForm,rules:t.HostGroupsRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"实例组名称",prop:"name"}},[a("el-input",{staticClass:"group-name",attrs:{placeholder:"请输入实例组名称"},model:{value:t.HostGroupsForm.name,callback:function(e){t.$set(t.HostGroupsForm,"name","string"==typeof e?e.trim():e)},expression:"HostGroupsForm.name"}}),t._v(" "),t.isAlter?t._e():a("el-button",{staticClass:"createHostsBtn",attrs:{type:"primary",plain:""},on:{click:function(e){t.createHosts("HostGroupsForm")}}},[t._v("创建实例组")]),t._v(" "),t.isAlter?a("el-button",{staticClass:"createHostsBtn",attrs:{type:"success",plain:"",round:""},on:{click:function(e){t.createHosts("HostGroupsForm")}}},[t._v("修改实例组")]):t._e()],1),t._v(" "),a("el-form-item",{staticClass:"transfer"},[a("el-transfer",{attrs:{filterable:"","filter-placeholder":"请输入实例名或IP",titles:["未选实例列表","已选实例列表"],data:t.list},model:{value:t.instances,callback:function(e){t.instances=e},expression:"instances"}})],1)],1)],1)},Wt=[],Xt={render:qt,staticRenderFns:Wt},Zt=Xt,Jt=a("8AGX"),Kt=c,Qt=Jt(Ut,Zt,!1,Kt,null,null),Yt=Qt.exports,te={props:["alarmData"],components:{customTable:Ht,createHosts:Yt},data:function(){return{parentAlarms:[],merticData:[],metricList:[],MetricLength:[1],isAll:!0,alarmObj:!0,avail_zone:[],hostGroups_list:[],team_list:[],alarmForm:{name:"",parent_id:"",strategies:[{metric:"",func:"avg",op:"==",right_value:0}],binds:[],action:{uic:[]}},alarmRules:{name:[{required:!0,message:"请输入规则名称",trigger:"change"}],parent_id:[{required:!0,message:"请输入父规则名称",trigger:"change"}],strategies:[{validator:function(t,e,a){var s=!0;for(var i in e)e[i].metric||(s=!1,a(new Error("监控项名称不能为空！")));s&&a()},trigger:"change"}],action:[{validator:function(t,e,a){e.uic.length?a():a(new Error("告警接收人不能为空！"))},trigger:"change"}]}}},created:function(){var t=this;this.parentAlarms=this.alarmData.slice(0),this.$http.get("/monitor/metrics/").then(function(e){t.merticData=e.body.data,t.metricList=t.merticData.slice(0),t.$http.get("/monitor/hostgroups/").then(function(e){t.hostGroups_list=e.body.data,t.hostGroups_list.length&&t.$set(t.avail_zone,0,t.hostGroups_list[0].id),t.$http.get("/noec2/instances").then(function(e){t.instList=e.body.data})})})},mounted:function(){var t=this;this.$http.get("/monitor/teams/").then(function(e){t.team_list=e.body.data})},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var a={};for(var s in e.alarmForm)"binds"===s&&!0===e.alarmObj?a[s]=[0]:a[s]=e.alarmForm[s];var i=e.$createElement;e.$msgbox({title:"提示",message:i("p",null,[i("span",null,"即将创建告警规则 "),i("i",{style:"color: teal"},e.alarmForm.name)]),showClose:!1,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(t,s,i){"confirm"===t?(s.confirmButtonLoading=!0,s.confirmButtonText="执行中...",e.$http.post("/monitor/rules",a).then(function(t){e.mess="告警规则创建成功！",e.messType="success",s.confirmButtonLoading=!1,i()})):i()}}).then(function(t){e.$message({type:e.messType,message:e.mess,customClass:"pop-mess",center:!0}),e.$emit("cancel-create","success")}).catch(function(t){e.$message({type:"info",message:"取消创建"})})})},parentFilter:function(t){this.parentAlarms=this.alarmData.filter(function(e){var a=t.toLowerCase();return e.name.toLowerCase().indexOf(a)>-1})},deleteMetric:function(t){this.MetricLength.length>1&&(this.alarmForm.strategies.splice(t,1),this.MetricLength.splice(t,1))},addMetric:function(){var t=this.MetricLength.length,e={metric:"",func:"avg",op:"==",right_value:0};this.$set(this.alarmForm.strategies,t,e),this.MetricLength.push(1)},createhostGroups:function(t){this.hostGroups_list.push(t)},cancel:function(){this.$emit("cancel-create",!1)}}},ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createAlarm"},[a("div",{staticClass:"createCont o-h"},[a("p",[t._v("新建告警规则")]),t._v(" "),a("div",{staticClass:"Settingform"},[a("el-form",{ref:"alarmForm",attrs:{model:t.alarmForm,rules:t.alarmRules,"label-width":"100px",size:"medium","label-position":"left"}},[a("el-alert",{staticClass:"alarm-title",attrs:{title:"规则信息",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{attrs:{label:"规则名称",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入规则名称"},model:{value:t.alarmForm.name,callback:function(e){t.$set(t.alarmForm,"name","string"==typeof e?e.trim():e)},expression:"alarmForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"父规则",prop:"parent_id"}},[a("el-select",{staticClass:"long-item",attrs:{filterable:"",clearable:"","filter-method":t.parentFilter,placeholder:"请输入父规则"},model:{value:t.alarmForm.parent_id,callback:function(e){t.$set(t.alarmForm,"parent_id",e)},expression:"alarmForm.parent_id"}},t._l(t.parentAlarms,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-alert",{staticClass:"alarm-title",attrs:{title:"告警策略",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{attrs:{prop:"strategies","label-width":"0px"}},[a("custom-table",{staticClass:"customtables"},[a("ul",{staticClass:"table-headers d-f",attrs:{slot:"table-header"},slot:"table-header"},[a("li",{staticClass:"header-item border-r",staticStyle:{"flex-grow":"2"}},[t._v("监控项名称")]),t._v(" "),a("li",{staticClass:"header-item border-r"},[t._v("统计方法")]),t._v(" "),a("li",{staticClass:"header-item border-r"},[t._v("大小")]),t._v(" "),a("li",{staticClass:"header-item border-r"},[t._v("阈值")]),t._v(" "),a("li",{staticClass:"header-item operateBtns"},[t._v("操作")])]),t._v(" "),a("div",{attrs:{slot:"table-body"},slot:"table-body"},t._l(t.MetricLength,function(e,s){return a("ul",{staticClass:"table-headers d-f",staticStyle:{padding:"8px 0"}},[a("li",{staticClass:"header-item perWidth",staticStyle:{"flex-grow":"2"}},[a("el-select",{staticClass:"itemWidth",attrs:{clearable:"",filterable:"",placeholder:"请输入监控项名称"},model:{value:t.alarmForm.strategies[s].metric,callback:function(e){t.$set(t.alarmForm.strategies[s],"metric",e)},expression:"alarmForm.strategies[index].metric"}},t._l(t.metricList,function(t){return a("el-option",{key:t.metric,attrs:{label:t.name,value:t.metric}})}))],1),t._v(" "),a("li",{staticClass:"header-item"},[a("el-select",{model:{value:t.alarmForm.strategies[s].func,callback:function(e){t.$set(t.alarmForm.strategies[s],"func",e)},expression:"alarmForm.strategies[index].func"}},t._l(t.$store.state.statistic,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("li",{staticClass:"header-item"},[a("el-select",{model:{value:t.alarmForm.strategies[s].op,callback:function(e){t.$set(t.alarmForm.strategies[s],"op",e)},expression:"alarmForm.strategies[index].op"}},t._l(t.$store.state.operators,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("li",{staticClass:"header-item"},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:t.alarmForm.strategies[s].right_value,callback:function(e){t.$set(t.alarmForm.strategies[s],"right_value",e)},expression:"alarmForm.strategies[index].right_value"}})],1),t._v(" "),a("li",{staticClass:"header-item operateBtns"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.deleteMetric(s)}}},[t._v("删除")])],1)])}))])],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-button",{attrs:{type:"success",plain:"",round:""},on:{click:function(e){t.addMetric()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" "),a("span",[t._v("添加")])])],1),t._v(" "),a("el-alert",{staticClass:"alarm-title",attrs:{title:"选择告警对象",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-form-item",{attrs:{label:"告警对象"}},[a("el-radio",{attrs:{label:t.isAll},model:{value:t.alarmObj,callback:function(e){t.alarmObj=e},expression:"alarmObj"}},[t._v("所有实例")]),t._v(" "),a("el-radio",{attrs:{label:!t.isAll},model:{value:t.alarmObj,callback:function(e){t.alarmObj=e},expression:"alarmObj"}},[t._v("自选实例")])],1),t._v(" "),t.alarmObj?t._e():a("div",{staticClass:"self-selected"},[t.hostGroups_list.length?a("el-form-item",{attrs:{label:"实例组"}},[a("el-checkbox-group",{attrs:{size:"small"},model:{value:t.alarmForm.binds,callback:function(e){t.$set(t.alarmForm,"binds",e)},expression:"alarmForm.binds"}},t._l(t.hostGroups_list,function(e){return a("el-checkbox",{key:e.name,attrs:{label:e.id,border:""}},[t._v(t._s(e.name))])}))],1):t._e(),t._v(" "),a("el-collapse",{staticStyle:{"margin-top":"20px"}},[a("el-collapse-item",[a("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t      新建实例组 "),a("i",{staticClass:"header-icon el-icon-info"})]),t._v(" "),a("el-form-item",[a("create-hosts",{staticClass:"selected-inst",attrs:{"instance-list":t.instList},on:{"create-hosts":t.createhostGroups}})],1)],2)],1)],1)],1),t._v(" "),a("el-alert",{staticClass:"alarm-title",attrs:{title:"设置告警接收人",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{attrs:{label:"告警接收人",prop:"action"}},[a("el-select",{staticClass:"long-item",attrs:{filterable:"",multiple:"",placeholder:"请选择告警接收人"},model:{value:t.alarmForm.action.uic,callback:function(e){t.$set(t.alarmForm.action,"uic",e)},expression:"alarmForm.action.uic"}},t._l(t.team_list,function(t){return a("el-option",{key:t.team.id,attrs:{label:t.team.name,value:t.team.name}})}))],1)],1)],1),t._v(" "),a("div",{staticClass:"createInfo"},[a("div",{staticClass:"btns ta-r"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.submitForm("alarmForm")}}},[a("i",{staticClass:"fa fa-gear"}),t._v(" "),a("span",[t._v("创 建")])]),t._v(" "),a("el-button",{attrs:{type:"info",plain:""},on:{click:t.cancel}},[t._v("取 消")])],1)])])])},ae=[],se={render:ee,staticRenderFns:ae},ie=se,re=a("8AGX"),ne=m,oe=re(te,ie,!1,ne,"data-v-b485cda2",null),le=oe.exports,ce={props:["alarmInfoData","parentRuleData"],components:{customTable:Ht,createHosts:Yt},data:function(){var t=function(t,e,a){var s=!0;for(var i in e)e[i].metric||(s=!1,a(new Error("监控项名称不能为空！")));s&&a()},e=function(t,e,a){e.length?a():a(new Error("告警接收人不能为空！"))};return{parentAlarms:[],metricList:[],CloneMetricLength:[],MetricLength:[],ruleId:"",actionId:"",strategiesId:"",isAddBind:!1,isAll:!0,alarmObj:!0,isRuleInfoDis:!0,isStrategiesDis:!0,isAlarmObjDis:!0,isUicDis:!0,avail_zone:[],hostGroups_list:[],bindsHostGroups_list:[],team_list:[],CloneAlarmInfo:{},alarmInfoForm:{name:"",parent_id:""},alarmInfoRules:{name:[{required:!0,message:"请输入规则名称",trigger:"change"}],parent_id:[{required:!0,message:"请输入父规则名称",trigger:"change"}]},CloneStrategies:[],strategiesForm:{strategies:[{metric:"",func:"",op:"",right_value:""}]},strategiesRules:{strategies:[{validator:t,trigger:"change"}]},CloneAlarmObj:[],unbindArr:[],unbindNames:[],bindArr:[],alarmObjForm:{binds:[]},alarmObjRules:{binds:[{validator:function(t,e,a){e.length?a():a(new Error("告警对象不能为空！"))},trigger:"change"}]},CloneSelected_uic:[],AlarmUicForm:{uic:[]},AlarmUicRules:{uic:[{validator:e,trigger:"change"}]}}},created:function(){var t=this;this.parentAlarms=this.parentRuleData.slice(0),this.$http.get("/monitor/metrics/").then(function(e){t.metricList=e.body.data,t.$http.get("/monitor/hostgroups/").then(function(e){t.hostGroups_list=e.body.data,t.$http.get("/monitor/rule/11/hostgroup/").then(function(e){t.bindsHostGroups_list=e.body.data.hostgroups;for(var a=0;a<t.bindsHostGroups_list.length;a++)t.alarmObjForm.binds.push(t.bindsHostGroups_list[a].id)})})})},mounted:function(){var t=this;this.alarmInfoForm.name=this.alarmInfoData.rule.name,this.alarmInfoForm.parent_id=this.alarmInfoData.rule.parent_id,this.ruleId=this.alarmInfoData.rule.id,this.strategiesId=this.alarmInfoData.strategies.id,this.actionId=this.alarmInfoData.action.id,this.AlarmUicForm.uic=this.alarmInfoData.action.uic.split(",");for(var e=this.alarmInfoData.strategies,a=0;a<e.length;a++)this.MetricLength.push(1),this.$set(this.strategiesForm.strategies,a,this.strategiesForm.strategies[0]),this.strategiesForm.strategies[a].metric=e[a].metric,this.strategiesForm.strategies[a].func=e[a].func,this.strategiesForm.strategies[a].right_value=e[a].right_value,this.strategiesForm.strategies[a].op=e[a].op;this.$http.get("/monitor/teams/").then(function(e){t.team_list=e.body.data})},methods:{popMess:function(t){var e=this,a=this.$createElement;if("alarmObjForm"===t.formname)for(var s=0;s<this.unbindNames.length;s++)t.name.push(a("span",{style:"color: teal;margin-right:10px"},this.unbindNames[s]));this.$msgbox({title:"提示",message:a("p",null,[a("span",null,t.tip),a("p",{style:"word-wrap: break-word;overflow: hidden"},t.name)]),showClose:!1,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(a,s,i){if("confirm"===a){s.confirmButtonLoading=!0,s.confirmButtonText="执行中...";var r,n=e;r="post"===t.type?function(){return n.$http.post(t.url,t.data)}:"patch"===t.type?function(){return n.$http.patch(t.url,t.data)}:function(){return n.$http.put(t.url,t.data)},r().then(function(a){e.mess=t.mess,e.messType="success",s.confirmButtonLoading=!1,i()})}else i()}}).then(function(a){e.$message({type:e.messType,message:e.mess,customClass:"pop-mess",center:!0}),"strategiesForm"===t.formname?e.isStrategiesDis=!0:"alarmInfoForm"===t.formname?e.isRuleInfoDis=!0:"alarmObjForm"===t.formname?e.$http.get("/monitor/rule/11/hostgroup/").then(function(t){e.alarmObjForm.binds=[],e.bindsHostGroups_list=t.body.data.hostgroups;for(var a=0;a<e.bindsHostGroups_list.length;a++)e.alarmObjForm.binds.push(e.bindsHostGroups_list[a].id);e.isAlarmObjDis=!0}):"AlarmUicForm"===t.formname&&(e.isUicDis=!0)}).catch(function(t){e.$message({type:"info",message:"取消操作"})})},submitForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return console.log("error submit!!"),!1;var s={};"strategiesForm"===t?(s={type:"patch",formname:"strategiesForm",tip:"确定修改监控项？",name:"",url:"/monitor/strategies/1",data:e.strategiesForm.strategies,mess:"监控项修改成功！"},e.popMess(s)):"alarmInfoForm"===t?(s={type:"patch",formname:"alarmInfoForm",tip:"确定修改规则信息？",name:"",url:"/monitor/rules/1",data:e.alarmInfoForm,mess:"规则信息修改成功！"},e.popMess(s)):"alarmObjForm"===t?(s={type:"post",formname:"alarmObjForm",tip:"确定解绑所选的告警对象？",name:[],url:"/monitor/rules/1",data:{action:"unbind",grp_id:e.unbindArr},mess:"告警对象解绑成功"},e.popMess(s)):"AlarmUicForm"===t&&(s={type:"put",formname:"AlarmUicForm",tip:"确定修改告警接收人？",name:"",url:"/monitor/actions/1",data:{uic:e.AlarmUicForm.uic},mess:"告警接收人修改成功"},e.popMess(s))})},editFunc:function(t){"alarmInfoForm"===t?(this.isRuleInfoDis=!1,this.CloneAlarmInfo.name=this.alarmInfoForm.name,this.CloneAlarmInfo.parent_id=this.alarmInfoForm.parent_id):"strategiesForm"===t?(this.isStrategiesDis=!1,this.CloneMetricLength=this.MetricLength.slice(0),this.CloneStrategies=this.strategiesForm.strategies.slice(0)):"alarmObjForm"===t?(this.isAlarmObjDis=!1,this.CloneAlarmObj=this.alarmObjForm.binds.slice(0)):"AlarmUicForm"===t&&(this.isUicDis=!1,this.CloneSelected_uic=this.AlarmUicForm.uic.slice(0))},cancelEdit:function(t){if("alarmInfoForm"===t){this.isRuleInfoDis=!0;for(var e in this.CloneAlarmInfo)this.alarmInfoForm[e]=this.CloneAlarmInfo[e]}else"strategiesForm"===t?(this.isStrategiesDis=!0,this.MetricLength=this.CloneMetricLength.slice(0),this.strategiesForm.strategies=this.CloneStrategies.slice(0)):"alarmObjForm"===t?(this.isAlarmObjDis=!0,this.alarmObjForm.binds=this.CloneAlarmObj.slice(0),this.unbindArr=[],this.unbindNames=[]):"AlarmUicForm"===t&&(this.isUicDis=!0,this.AlarmUicForm.uic=this.CloneSelected_uic.slice(0))},parentFilter:function(t){this.parentAlarms=this.parentRuleData.filter(function(e){var a=t.toLowerCase();return e.name.toLowerCase().indexOf(a)>-1})},deleteMetric:function(t){this.MetricLength.length>1&&(this.strategiesForm.strategies.splice(t,1),this.MetricLength.splice(t,1))},addMetric:function(){var t=this.MetricLength.length,e={metric:"",func:"avg",op:"==",right_value:0};this.$set(this.strategiesForm.strategies,t,e),this.MetricLength.push(1)},changeBinds:function(t,e){if(this.alarmObjForm.binds.indexOf(t)<0)this.unbindArr.push(t),this.unbindNames.push(e);else{var a=this.unbindArr.indexOf(t);this.unbindArr.splice(a,1),this.unbindNames.splice(a,1)}},addBind:function(){this.avail_zone=this.alarmObjForm.binds.slice(0),this.bindArr=this.avail_zone.slice(0),this.isAddBind=!0},confirmAdd:function(){var t=this,e=this.bindArr.slice(this.avail_zone.length);this.$http.post("/monitor/rules/1",{action:"bind",grp_id:e}).then(function(e){t.$confirm("确定绑定已选的实例组？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.$http.get("/monitor/rule/11/hostgroup/").then(function(e){t.isAddBind=!1,t.bindsHostGroups_list=e.body.data.hostgroups,t.alarmObjForm.binds=[];for(var a=0;a<t.bindsHostGroups_list.length;a++)t.alarmObjForm.binds.push(t.bindsHostGroups_list[a].id);t.$message({type:"success",message:"绑定成功!"})})}).catch(function(e){t.$message({type:"info",message:"取消操作"})})})},cancelAdd:function(){this.isAddBind=!1},back:function(){this.$emit("return-back",!1)}}},me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alterAlarm"},[a("div",{staticClass:"alterCont o-h p-r"},[a("p",[t._v("修改告警规则")]),t._v(" "),a("el-button",{staticClass:"backBtn p-a",attrs:{type:"info",plain:""},on:{click:t.back}},[t._v("返 回")]),t._v(" "),a("div",{staticClass:"Settingform"},[a("el-form",{ref:"alarmInfoForm",attrs:{model:t.alarmInfoForm,rules:t.alarmInfoRules,"label-width":"100px",size:"medium","label-position":"left"}},[a("el-alert",{staticClass:"alarm-title",attrs:{title:"规则信息",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{attrs:{label:"规则名称",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入规则名称",disabled:t.isRuleInfoDis},model:{value:t.alarmInfoForm.name,callback:function(e){t.$set(t.alarmInfoForm,"name","string"==typeof e?e.trim():e)},expression:"alarmInfoForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"父规则",prop:"parent_id"}},[a("el-select",{staticClass:"long-item",attrs:{filterable:"",clearable:"","filter-method":t.parentFilter,placeholder:"请输入父规则",disabled:t.isRuleInfoDis},model:{value:t.alarmInfoForm.parent_id,callback:function(e){t.$set(t.alarmInfoForm,"parent_id",e)},expression:"alarmInfoForm.parent_id"}},t._l(t.parentAlarms,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"0px"}},[t.isRuleInfoDis?a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.editFunc("alarmInfoForm")}}},[a("i",{staticClass:"fa fa-pencil"}),t._v(" "),a("span",[t._v("编辑规则信息")])]):t._e(),t._v(" "),t.isRuleInfoDis?t._e():a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.submitForm("alarmInfoForm")}}},[a("i",{staticClass:"fa fa-gear"}),t._v(" "),a("span",[t._v("确定修改")])]),t._v(" "),t.isRuleInfoDis?t._e():a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){t.cancelEdit("alarmInfoForm")}}},[a("i",{staticClass:"fa fa-cogs"}),t._v(" "),a("span",[t._v("取消修改")])])],1)],1),t._v(" "),a("el-form",{ref:"strategiesForm",staticStyle:{"margin-top":"25px"},attrs:{model:t.strategiesForm,rules:t.strategiesRules,"label-width":"100px",size:"medium","label-position":"left"}},[a("el-alert",{staticClass:"alarm-title",attrs:{title:"告警策略",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{attrs:{prop:"strategies","label-width":"0px"}},[a("custom-table",{staticClass:"customtables"},[a("ul",{staticClass:"table-headers d-f",attrs:{slot:"table-header"},slot:"table-header"},[a("li",{staticClass:"header-item border-r",staticStyle:{"flex-grow":"2"}},[t._v("监控项名称")]),t._v(" "),a("li",{staticClass:"header-item border-r"},[t._v("统计方法")]),t._v(" "),a("li",{staticClass:"header-item border-r"},[t._v("大小")]),t._v(" "),a("li",{staticClass:"header-item border-r"},[t._v("阈值")]),t._v(" "),t.isStrategiesDis?t._e():a("li",{staticClass:"header-item operateBtns"},[t._v("操作")])]),t._v(" "),a("div",{attrs:{slot:"table-body"},slot:"table-body"},t._l(t.MetricLength,function(e,s){return a("ul",{staticClass:"table-headers d-f",staticStyle:{padding:"8px 0"}},[a("li",{staticClass:"header-item perWidth",staticStyle:{"flex-grow":"2"}},[a("el-select",{staticClass:"itemWidth",attrs:{clearable:"",filterable:"",placeholder:"请输入监控项名称",disabled:t.isStrategiesDis},model:{value:t.strategiesForm.strategies[s].metric,callback:function(e){t.$set(t.strategiesForm.strategies[s],"metric",e)},expression:"strategiesForm.strategies[index].metric"}},t._l(t.metricList,function(t){return a("el-option",{key:t.metric,attrs:{label:t.name,value:t.metric}})}))],1),t._v(" "),a("li",{staticClass:"header-item"},[a("el-select",{attrs:{disabled:t.isStrategiesDis},model:{value:t.strategiesForm.strategies[s].func,callback:function(e){t.$set(t.strategiesForm.strategies[s],"func",e)},expression:"strategiesForm.strategies[index].func"}},t._l(t.$store.state.statistic,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("li",{staticClass:"header-item"},[a("el-select",{attrs:{disabled:t.isStrategiesDis},model:{value:t.strategiesForm.strategies[s].op,callback:function(e){t.$set(t.strategiesForm.strategies[s],"op",e)},expression:"strategiesForm.strategies[index].op"}},t._l(t.$store.state.operators,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("li",{staticClass:"header-item"},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100,disabled:t.isStrategiesDis},model:{value:t.strategiesForm.strategies[s].right_value,callback:function(e){t.$set(t.strategiesForm.strategies[s],"right_value",e)},expression:"strategiesForm.strategies[index].right_value"}})],1),t._v(" "),t.isStrategiesDis?t._e():a("li",{staticClass:"header-item operateBtns"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.deleteMetric(s)}}},[t._v("删除")])],1)])}))])],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"0px"}},[t.isStrategiesDis?a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.editFunc("strategiesForm")}}},[a("i",{staticClass:"fa fa-pencil"}),t._v(" "),a("span",[t._v("编辑监控项")])]):t._e(),t._v(" "),t.isStrategiesDis?t._e():a("el-button",{attrs:{type:"success",plain:"",round:""},on:{click:t.addMetric}},[a("i",{staticClass:"fa fa-plus"}),t._v(" "),a("span",[t._v("添加")])]),t._v(" "),t.isStrategiesDis?t._e():a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.submitForm("strategiesForm")}}},[a("i",{staticClass:"fa fa-gear"}),t._v(" "),a("span",[t._v("确定修改")])]),t._v(" "),t.isStrategiesDis?t._e():a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){t.cancelEdit("strategiesForm")}}},[a("i",{staticClass:"fa fa-cogs"}),t._v(" "),a("span",[t._v("取消修改")])])],1)],1),t._v(" "),a("el-form",{ref:"alarmObjForm",attrs:{model:t.alarmObjForm,rules:t.alarmObjRules,"label-width":"100px",size:"medium","label-position":"left"}},[a("el-alert",{staticClass:"alarm-title",attrs:{title:"选择告警对象",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{staticClass:"self-selected",attrs:{label:"实例组",prop:"binds"}},[a("el-checkbox-group",{attrs:{size:"small",disabled:t.isAlarmObjDis},model:{value:t.alarmObjForm.binds,callback:function(e){t.$set(t.alarmObjForm,"binds",e)},expression:"alarmObjForm.binds"}},t._l(t.bindsHostGroups_list,function(e){return a("el-checkbox",{key:e.name,attrs:{label:e.id,border:""},on:{change:function(a){t.changeBinds(e.id,e.name)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-button",{attrs:{type:"success",plain:"",round:"",disabled:!t.isAlarmObjDis},on:{click:t.addBind}},[a("i",{staticClass:"fa fa-plus"}),t._v(" "),a("span",[t._v("添加告警对象")])]),t._v(" "),t.isAlarmObjDis?a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.editFunc("alarmObjForm")}}},[a("i",{staticClass:"fa fa-pencil"}),t._v(" "),a("span",[t._v("解 绑")])]):t._e(),t._v(" "),t.isAlarmObjDis?t._e():a("el-button",{attrs:{type:"danger",disabled:!t.unbindArr.length,plain:""},on:{click:function(e){t.submitForm("alarmObjForm")}}},[a("i",{staticClass:"fa fa-gear"}),t._v(" "),a("span",[t._v("确定解绑")])]),t._v(" "),t.isAlarmObjDis?t._e():a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){t.cancelEdit("alarmObjForm")}}},[a("i",{staticClass:"fa fa-cogs"}),t._v(" "),a("span",[t._v("取消解绑")])])],1)],1),t._v(" "),a("el-form",{ref:"AlarmUicForm",attrs:{model:t.AlarmUicForm,rules:t.AlarmUicRules,"label-width":"100px",size:"medium","label-position":"left"}},[a("el-alert",{staticClass:"alarm-title",attrs:{title:"设置告警接收人",type:"info",closable:!1,"show-icon":""}}),t._v(" "),t.isUicDis?a("div",{staticClass:"uicPanel o-h"},[a("div",{staticClass:"left f-l"},[t._v("告警接收人：")]),t._v(" "),a("div",{staticClass:"right f-l"},t._l(t.AlarmUicForm.uic,function(e){return a("p",[t._v(t._s(e))])}))]):t._e(),t._v(" "),t.isUicDis?t._e():a("el-form-item",{attrs:{label:"告警接收人",prop:"uic"}},[a("el-select",{staticClass:"long-item",attrs:{filterable:"",multiple:"",placeholder:"请选择告警接收人"},model:{value:t.AlarmUicForm.uic,callback:function(e){t.$set(t.AlarmUicForm,"uic",e)},expression:"AlarmUicForm.uic"}},t._l(t.team_list,function(t){return a("el-option",{key:t.team.id,attrs:{label:t.team.name,value:t.team.name}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"0px"}},[t.isUicDis?a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.editFunc("AlarmUicForm")}}},[a("i",{staticClass:"fa fa-pencil"}),t._v(" "),a("span",[t._v("修改告警接收人")])]):t._e(),t._v(" "),t.isUicDis?t._e():a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.submitForm("AlarmUicForm")}}},[a("i",{staticClass:"fa fa-gear"}),t._v(" "),a("span",[t._v("确定修改")])]),t._v(" "),t.isUicDis?t._e():a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){t.cancelEdit("AlarmUicForm")}}},[a("i",{staticClass:"fa fa-cogs"}),t._v(" "),a("span",[t._v("取消修改")])])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增告警实例组",visible:t.isAddBind,"show-close":!1,width:"45%"},on:{"update:visible":function(e){t.isAddBind=e}}},[a("div",[a("el-checkbox-group",{attrs:{size:"small"},model:{value:t.bindArr,callback:function(e){t.bindArr=e},expression:"bindArr"}},[a("el-row",{attrs:{gutter:10}},t._l(t.hostGroups_list,function(e){return a("el-col",{key:e.name,staticStyle:{"margin-bottom":"15px"},attrs:{span:8}},[a("el-checkbox",{attrs:{label:e.id,border:"",disabled:t.avail_zone.indexOf(e.id)>=0}},[t._v(t._s(e.name))])],1)}))],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelAdd}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmAdd}},[t._v("绑 定")])],1)])],1)])},ue=[],pe={render:me,staticRenderFns:ue},de=pe,he=a("8AGX"),fe=u,ve=he(ce,de,!1,fe,"data-v-ceed8c50",null),ge=ve.exports,be={components:{createAlarm:le,alterAlarm:ge},data:function(){return{isHidden:!1,isCreate:!1,isAlter:!1,searchValue:"",parentAlarmData:[],alarmInfo:{},pageSize:25,currentPage:1,opts:[25,100,200,1e4]}},created:function(){var t=this;this.$http.get("/monitor/rules/").then(function(e){var a=e.body.data;t.$store.commit("changeData",a),t.parentAlarmData=t.$store.state.tableData.slice(0)})},computed:{CurrentData:function(){var t=(this.currentPage-1)*this.pageSize,e=this.currentPage*this.pageSize;return this.$store.state.tableData.length<e?this.$store.state.tableData.slice(t):this.$store.state.tableData.slice(t,e)},itemCount:function(){return this.$store.state.tableData.length}},methods:{sortChange:function(t){this.$store.commit("sortChange",t)},changePage:function(t){this.currentPage=t,window.scrollTo(0,0)},changePageSize:function(t){this.pageSize=t,this.currentPage=1,window.scrollTo(0,0)},refresh:function(){var t=this;this.$http.get("/monitor/rules/").then(function(e){t.searchValue="",t.currentPage=1;var a=e.body.data;t.$store.commit("changeData",a)})},deleteRule:function(t){var e=this,a=this.$createElement;this.$msgbox({title:"提示",message:a("p",null,[a("span",null,"即将删除规则"),a("span",{style:"padding:0 8px;color: teal;word-wrap: break-word;overflow: hidden"},t.name),a("p",{style:"font-weight:700;font-size:15px;color:#F56C6C"},"(告警规则删除后将无法找回！)")]),showCancelButton:!0,showClose:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(a,s,i){"confirm"===a?(s.confirmButtonLoading=!0,s.confirmButtonText="执行中...",e.$http.delete("/monitor/rules/1").then(function(a){var r=e.$store.state.tableData.indexOf(t);e.$store.state.tableData.splice(r,1),e.mess="告警规则删除成功！",e.messType="success",s.confirmButtonLoading=!1,i()})):i()}}).then(function(t){e.$alert(e.mess,"提示",{confirmButtonText:"确定",type:e.messType,showClose:!1}),e.$emit("cancel-create","success")}).catch(function(t){e.$message({type:"info",message:"取消删除"})})},createInstance:function(){this.isHidden=!0,this.isCreate=!0},alterAlarm:function(t){var e=this;this.$http.get("/monitor/rules/10").then(function(t){e.alarmInfo=t.body.data,e.isHidden=!0,e.isAlter=!0})},returnBack:function(){this.isHidden=!1,this.isAlter=!1},CancleCreate:function(t){"success"===t&&this.refresh(),this.isHidden=!1,this.isCreate=!1}}},_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alarm"},[t.isHidden?t._e():a("div",{staticClass:"alarm-list"},[a("div",{staticClass:"btn-group"},[a("el-button",{staticClass:"f-l",attrs:{type:"primary",icon:"fa fa-plus",plain:""},on:{click:t.createInstance}},[t._v(" 新建告警规则")]),t._v(" "),a("div",{staticClass:"table-btn f-r"},[a("el-button",{attrs:{icon:"fa fa-refresh",title:"全部刷新"},on:{click:t.refresh}})],1),t._v(" "),a("div",{staticClass:"search f-r p-r"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{type:"text",placeholder:"请输入内容"},domProps:{value:t.searchValue},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$store.commit("handleSearch",t.searchValue)},input:[function(e){e.target.composing||(t.searchValue=e.target.value)},function(e){t.$store.commit("emptySearch",t.searchValue)}]}}),t._v(" "),a("el-button",{staticClass:"search-btn p-a",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.$store.commit("handleSearch",t.searchValue)}},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{attrs:{border:"",data:t.CurrentData},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{label:"规则名称",sortable:"custom",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-refresh c-p",staticStyle:{"margin-right":"8px"},attrs:{title:"刷新"}}),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.alterAlarm(e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"父规则",prop:"parent_name",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建者",prop:"create_user",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"告警接收人",prop:"uic",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(a){t.deleteRule(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1)]),t._v(" "),t.isHidden?a("div",[t.isCreate?a("create-alarm",{attrs:{alarmData:t.parentAlarmData},on:{"cancel-create":t.CancleCreate}}):t._e(),t._v(" "),t.isAlter?a("alter-alarm",{attrs:{alarmInfoData:t.alarmInfo,parentRuleData:t.parentAlarmData},on:{"return-back":t.returnBack}}):t._e()],1):t._e()])},Ce=[],ye={render:_e,staticRenderFns:Ce},we=ye,Fe=a("8AGX"),xe=p,ke=Fe(be,we,!1,xe,"data-v-10c03ac6",null),$e=ke.exports,Ie=a("hRKE"),Se=a.n(Ie),Pe={props:["isAlter","userList","contactInfo","Title"],mounted:function(){this.contactInfo.length?(this.contactsForm.name=this.contactInfo[0].name,this.contactsForm.users=this.contactInfo[0].users.slice(0)):(this.contactsForm.name="",this.contactsForm.users=[])},data:function(){return{isVisible:!1,contactsForm:{name:"",users:[],resume:""},Contacts:{name:[{required:!0,message:"请输入联系人组名称",trigger:"change"}],users:[{required:!0,message:"请选择联系人",trigger:"change"}]}}},methods:{cancel:function(){this.$emit("cancel-pop",!1)},popMess:function(t){var e=this,a=this.$createElement,s=this;this.$msgbox({title:"提示",message:a("p",null,[a("span",null,t.tip),a("i",{style:"color: teal"},this.contactsForm.name)]),showClose:!1,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(a,i,r){if("confirm"===a){i.confirmButtonLoading=!0,i.confirmButtonText="执行中...";var n;"edit"===t.operate?n=function(){return s.$http.put(t.url,t.data)}:"create"===t.operate&&(n=function(){return s.$http.post(t.url,t.data)}),n().then(function(a){e.$emit("create-hosts",a.body.data),e.mess=t.mess,e.messType="success",i.confirmButtonLoading=!1,e.$emit("cancel-pop",!0),r()})}else r()}}).then(function(t){e.$message({type:e.messType,message:e.mess,customClass:"pop-mess",center:!0})}).catch(function(a){e.$message({type:"info",message:t.cancelTip})})},submitForm:function(t,e){var a=this;this.$refs[t].validate(function(t){if(t)if("创建联系人组"===e){var s={operate:"create",url:"/monitor/teams/",data:a.contactsForm,tip:"即将创建联系人组",mess:"联系人组创建成功！",cancelTip:"取消创建"};a.popMess(s)}else{var s={operate:"edit",url:"/monitor/teams/1/",data:a.contactsForm,tip:"即将修改联系人组",mess:"联系人组修改成功！",cancelTip:"取消修改"};a.popMess(s)}})}}},ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contactPanel"},[a("div",{staticClass:"panelCont o-h p-r"},[a("p",[t._v(t._s(t.Title))]),t._v(" "),a("el-button",{staticClass:"backBtn p-a",attrs:{type:"danger",plain:""},on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("div",{staticClass:"Settingform"},[a("el-form",{ref:"contactsForm",attrs:{model:t.contactsForm,rules:t.Contacts,"label-width":"120px",size:"medium","label-position":"left"}},[a("el-alert",{staticClass:"alarm-title",attrs:{title:"联系人组",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{attrs:{label:"联系人组名称",prop:"name"}},[a("el-input",{staticClass:"self-selected",attrs:{placeholder:"请输入联系人组名称"},model:{value:t.contactsForm.name,callback:function(e){t.$set(t.contactsForm,"name","string"==typeof e?e.trim():e)},expression:"contactsForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人列表",prop:"users"}},[a("el-select",{staticClass:"self-selected",attrs:{filterable:"",multiple:"",placeholder:"请选择联系人"},model:{value:t.contactsForm.users,callback:function(e){t.$set(t.contactsForm,"users",e)},expression:"contactsForm.users"}},t._l(t.userList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[a("span",{staticClass:"f-l"},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticClass:"f-r",staticStyle:{color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email.split("@")[0]))])])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"联系组描述"}},[a("el-input",{staticClass:"self-selected",attrs:{type:"textarea",autosize:{minRows:4,maxRows:1e3},placeholder:"请输入内容"},model:{value:t.contactsForm.resume,callback:function(e){t.$set(t.contactsForm,"resume",e)},expression:"contactsForm.resume"}})],1),t._v(" "),a("el-form-item",{staticClass:"o-h",staticStyle:{width:"700px"}},[a("el-button",{staticClass:"f-r",attrs:{type:"primary"},on:{click:function(e){t.submitForm("contactsForm",t.Title)}}},[t._v("确 定")])],1)],1)],1)],1)])},Ae=[],De={render:ze,staticRenderFns:Ae},Le=De,Te=a("8AGX"),Be=d,Ee=Te(Pe,Le,!1,Be,"data-v-5a6f267e",null),Ge=Ee.exports,Oe={components:{contactPanel:Ge},data:function(){return{isCreate:!1,isAlter:!1,searchValue:"",pageSize:25,currentPage:1,opts:[25,100,200,1e4],ownerlist:[],contactsInfo:[],popTitle:"",key:"name",order:"ascending"}},created:function(){var t=this;this.$http.get("/monitor/teams/").then(function(e){var a=e.body.data;t.$store.commit("changeData",a)}),this.$http.get("/auth/users").then(function(e){e.body.data.forEach(function(e,a){t.ownerlist.push({label:e.label,email:e.email,value:e.id})})})},computed:{CurrentData:function(){var t=(this.currentPage-1)*this.pageSize,e=this.currentPage*this.pageSize;return this.$store.state.tableData.length<e?this.$store.state.tableData.slice(t):this.$store.state.tableData.slice(t,e)},itemCount:function(){return this.$store.state.tableData.length}},methods:{handleSearch:function(t){var e=t.trim();this.currentPage=1,this.$store.state.tableData=this.$store.state.listData.filter(function(t){for(var a in t)if("object"===Se()(t[a])){for(var s in t[a])if(String(t[a][s])===e)return t}else if(String(t[a])===e)return t})},sortChange:function(t){t.order&&t.prop&&this.order!==t.order&&(this.order=t.order,"ascending"===this.order?this.$store.state.tableData.sort(function(t,e){return t.team.name.localeCompare(e.team.name)}):"descending"===this.order&&this.$store.state.tableData.reverse(function(t,e){return t.team.name.localeCompare(e.team.name)}))},changePage:function(t){this.currentPage=t,window.scrollTo(0,0)},changePageSize:function(t){this.pageSize=t,this.currentPage=1,window.scrollTo(0,0)},refresh:function(){var t=this;this.$http.get("/monitor/teams/").then(function(e){t.$store.state.listData=[],t.searchValue="",t.currentPage=1;var a=e.body.data;t.$store.commit("changeData",a)})},createContacts:function(){this.popTitle="创建联系人组",this.isCreate=!0,this.isAlter=!1},editContacts:function(t){var e=this;this.$http.get("/monitor/teams/1/").then(function(t){var a=t.body.data,s=[];a.users.forEach(function(t,e){s.push(t.id)}),e.contactsInfo.push({creator:a.creator.name,id:a.id,name:a.name,resume:a.resume,users:s}),e.popTitle="修改联系人组",e.isCreate=!0,e.isAlter=!0})},deleteContacts:function(t){var e=this,a=this.$createElement;this.$msgbox({title:"提示",message:a("p",null,[a("span",null,"即将删除联系人组"),a("span",{style:"padding:0 8px;color: teal;word-wrap: break-word;overflow: hidden"},t.team.name),a("p",{style:"font-weight:700;font-size:15px;color:#F56C6C"},"(联系人组删除后将无法找回！)")]),showCancelButton:!0,showClose:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(a,s,i){"confirm"===a?(s.confirmButtonLoading=!0,s.confirmButtonText="执行中...",e.$http.delete("/monitor/teams/1").then(function(a){var r=e.$store.state.tableData.indexOf(t);e.$store.state.tableData.splice(r,1),e.mess="联系人组删除成功！",e.messType="success",s.confirmButtonLoading=!1,i()})):i()}}).then(function(t){e.$alert(e.mess,"提示",{confirmButtonText:"确定",type:e.messType,showClose:!1}),e.$emit("cancel-create","success")}).catch(function(t){e.$message({type:"info",message:"取消删除"})})},CanclePop:function(t){t&&this.refresh(),this.contactsInfo=[],this.isCreate=!1}}},je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contacts"},[t.isCreate?t._e():a("div",{staticClass:"contacts-list"},[a("div",{staticClass:"btn-group"},[a("el-button",{staticClass:"f-l",attrs:{type:"primary",icon:"fa fa-plus",plain:""},on:{click:t.createContacts}},[t._v(" 新建联系人")]),t._v(" "),a("div",{staticClass:"table-btn f-r"},[a("el-button",{attrs:{icon:"fa fa-refresh",title:"全部刷新"},on:{click:t.refresh}})],1),t._v(" "),a("div",{staticClass:"search f-r p-r"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{type:"text",placeholder:"请输入内容"},domProps:{value:t.searchValue},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleSearch(t.searchValue)},input:[function(e){e.target.composing||(t.searchValue=e.target.value)},function(e){t.$store.commit("emptySearch",t.searchValue)}]}}),t._v(" "),a("el-button",{staticClass:"search-btn p-a",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.handleSearch(t.searchValue)}},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.CurrentData},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{label:"联系人组名称",width:"200",prop:"team.name",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"组成员"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.users,function(e){return a("el-tag",{key:e.name,staticClass:"member-tag",attrs:{type:"primary","close-transition":""}},[t._v(t._s(e.name)+"--"+t._s(e.email))])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建者",width:"150",prop:"creator.name",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(a){t.editContacts(e.row.team.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(a){t.deleteContacts(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1)]),t._v(" "),t.isCreate?a("div",{staticClass:"contactPanel"},[a("contact-panel",{attrs:{"is-alter":t.isAlter,"user-list":t.ownerlist,"contact-info":t.contactsInfo,Title:t.popTitle},on:{"cancel-pop":t.CanclePop}})],1):t._e()])},Re=[],Ve={render:je,staticRenderFns:Re},Me=Ve,Ne=a("8AGX"),He=h,Ue=Ne(Oe,Me,!1,He,"data-v-546f90a4",null),qe=Ue.exports,We={components:{createHosts:Yt},props:["isAlter","hostsInfo","instList"],data:function(){return{isVisible:!1}},methods:{createhostGroups:function(t){this.$emit("cancel-create",!0)},cancel:function(){this.$emit("cancel-create",!1)}}},Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createInstGroup"},[a("div",{staticClass:"createCont o-h p-r"},[a("p",[t._v(t._s(t.hostsInfo.title))]),t._v(" "),a("el-button",{staticClass:"backBtn p-a",attrs:{type:"danger",plain:""},on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("div",{staticClass:"Settingform"},[a("el-form",{attrs:{"label-width":"100px",size:"medium","label-position":"left"}},[a("el-alert",{staticClass:"alarm-title",attrs:{title:"告警对象",type:"info",closable:!1,"show-icon":""}}),t._v(" "),a("el-form-item",{attrs:{"label-width":"0px",prop:"binds"}},[a("div",{staticClass:"self-selected"},[a("el-form-item",[a("create-hosts",{staticClass:"selected-inst",attrs:{"is-alter":t.isAlter,"instance-list":t.instList,"hostsgroup-info":t.hostsInfo},on:{"create-hosts":t.createhostGroups}})],1)],1)])],1)],1)],1)])},Ze=[],Je={render:Xe,staticRenderFns:Ze},Ke=Je,Qe=a("8AGX"),Ye=f,ta=Qe(We,Ke,!1,Ye,"data-v-44ec4c1e",null),ea=ta.exports,aa={components:{createInstsPanel:ea},data:function(){return{isCreate:!1,isAlter:!1,searchValue:"",pageSize:25,currentPage:1,opts:[25,100,200,1e4],instList:[],hostgroupsInfo:{}}},created:function(){var t=this;this.$http.get("/monitor/hostgroups/").then(function(e){var a=e.body.data;t.$store.commit("changeData",a),t.$http.get("/noec2/instances").then(function(e){t.instList=e.body.data})})},computed:{CurrentData:function(){var t=(this.currentPage-1)*this.pageSize,e=this.currentPage*this.pageSize;return this.$store.state.tableData.length<e?this.$store.state.tableData.slice(t):this.$store.state.tableData.slice(t,e)},itemCount:function(){return this.$store.state.tableData.length}},methods:{sortChange:function(t){this.$store.commit("sortChange",t)},changePage:function(t){this.currentPage=t,window.scrollTo(0,0)},changePageSize:function(t){this.pageSize=t,this.currentPage=1,window.scrollTo(0,0)},refresh:function(){var t=this;this.$http.get("/monitor/hostgroups/").then(function(e){t.searchValue="",t.currentPage=1;var a=e.body.data;t.$store.commit("changeData",a)})},createInstGroup:function(){this.hostgroupsInfo={title:"创建实例组"},this.isCreate=!0,this.isAlter=!1},editGroup:function(t){var e=this;this.$http.get("/monitor/hostgroups/1/").then(function(t){e.hostgroupsInfo=t.body.data,e.hostgroupsInfo.title="修改实例组",e.isCreate=!0,e.isAlter=!0})},deleteGroup:function(t){var e=this,a=this.$createElement;this.$msgbox({title:"提示",message:a("p",null,[a("span",null,"即将删除实例组"),a("span",{style:"padding:0 8px;color: teal;word-wrap: break-word;overflow: hidden"},t.name),a("p",{style:"font-weight:700;font-size:15px;color:#F56C6C"},"(实例组删除后将无法找回！)")]),showCancelButton:!0,showClose:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(a,s,i){"confirm"===a?(s.confirmButtonLoading=!0,s.confirmButtonText="执行中...",e.$http.delete("/monitor/hostgroups/1").then(function(a){var r=e.$store.state.tableData.indexOf(t);e.$store.state.tableData.splice(r,1),e.mess="实例组删除成功！",e.messType="success",s.confirmButtonLoading=!1,i()})):i()}}).then(function(t){e.$alert(e.mess,"提示",{confirmButtonText:"确定",type:e.messType,showClose:!1}),e.$emit("cancel-create","success")}).catch(function(t){e.$message({type:"info",message:"取消删除"})})},CancleCreate:function(t){t&&this.refresh(),this.isCreate=!1}}},sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"instances-group"},[t.isCreate?t._e():a("div",{staticClass:"instancesGroup-list"},[a("div",{staticClass:"btn-group"},[a("el-button",{staticClass:"f-l",attrs:{type:"primary",icon:"fa fa-plus",plain:""},on:{click:t.createInstGroup}},[t._v(" 新建实例组")]),t._v(" "),a("div",{staticClass:"table-btn f-r"},[a("el-button",{attrs:{icon:"fa fa-refresh",title:"全部刷新"},on:{click:t.refresh}})],1),t._v(" "),a("div",{staticClass:"search f-r p-r"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{type:"text",placeholder:"请输入内容"},domProps:{value:t.searchValue},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$store.commit("handleSearch",t.searchValue)},input:[function(e){e.target.composing||(t.searchValue=e.target.value)},function(e){t.$store.commit("emptySearch",t.searchValue)}]}}),t._v(" "),a("el-button",{staticClass:"search-btn p-a",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.$store.commit("handleSearch",t.searchValue)}},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{attrs:{border:"",data:t.CurrentData},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{label:"实例组名称",prop:"name",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(a){t.editGroup(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(a){t.deleteGroup(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1)]),t._v(" "),t.isCreate?a("div",{staticClass:"createInstance"},[a("createInstsPanel",{attrs:{"is-alter":t.isAlter,"inst-list":t.instList,"hosts-info":t.hostgroupsInfo},on:{"cancel-create":t.CancleCreate}})],1):t._e()])},ia=[],ra={render:sa,staticRenderFns:ia},na=ra,oa=a("8AGX"),la=v,ca=oa(aa,na,!1,la,"data-v-10a3f84a",null),ma=ca.exports,ua={data:function(){return{isCreate:!1,searchValue:"",pageSize:25,currentPage:1,opts:[25,100,200,1e4],graphsData:[]}},created:function(){var t=this;this.$http.get("/monitor/screens/").then(function(e){var a=e.body.data;console.log(a),t.$store.commit("changeData",a)})},computed:{CurrentData:function(){var t=(this.currentPage-1)*this.pageSize,e=this.currentPage*this.pageSize;return this.$store.state.tableData.length<e?this.$store.state.tableData.slice(t):this.$store.state.tableData.slice(t,e)},itemCount:function(){return this.$store.state.tableData.length}},methods:{sortChange:function(t){this.$store.commit("sortChange",t)},changePage:function(t){this.currentPage=t,window.scrollTo(0,0)},changePageSize:function(t){this.pageSize=t,this.currentPage=1,window.scrollTo(0,0)},refresh:function(){var t=this;this.$http.get("/monitor/screens/").then(function(e){t.searchValue="",t.currentPage=1;var a=e.body.data;t.$store.commit("changeData",a)})},getPanelGraph:function(t){this.$http.get("/monitor/screens/1/graphs/").then(function(t){})}}},pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[t.isCreate?t._e():a("div",{staticClass:"panel-list"},[a("div",{staticClass:"btn-group"},[a("el-button",{staticClass:"f-l",attrs:{type:"primary",icon:"fa fa-plus",plain:""}},[t._v(" 新建面板")]),t._v(" "),a("div",{staticClass:"table-btn f-r"},[a("el-button",{attrs:{icon:"fa fa-refresh",title:"全部刷新"},on:{click:t.refresh}})],1),t._v(" "),a("div",{staticClass:"search f-r p-r"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{type:"text",placeholder:"请输入内容"},domProps:{value:t.searchValue},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$store.commit("handleSearch",t.searchValue)},input:[function(e){e.target.composing||(t.searchValue=e.target.value)},function(e){t.$store.commit("emptySearch",t.searchValue)}]}}),t._v(" "),a("el-button",{staticClass:"search-btn p-a",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.$store.commit("handleSearch",t.searchValue)}},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{attrs:{border:"",data:t.CurrentData},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{label:"面板名称",sortable:"custom",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.getPanelInfo(e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",plain:"",size:"small"}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination ta-r"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.opts,"page-size":t.pageSize,total:t.itemCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.changePageSize,"current-change":t.changePage}})],1)])])},da=[],ha={render:pa,staticRenderFns:da},fa=ha,va=a("8AGX"),ga=g,ba=va(ua,fa,!1,ga,"data-v-3a61736e",null),_a=ba.exports;b.default.use(Z.a);var Ca=new Z.a({mode:"history",base:"/console",routes:[{path:"/home",name:"home",component:st,beforeEnter:function(t,e,a){window.keyPath=["/home"],a()}},{path:"/instance",name:"instance",component:yt,beforeEnter:function(t,e,a){window.keyPath=["2","2-1","/instance"],a()}},{path:"/disk",name:"disk",component:St,beforeEnter:function(t,e,a){window.keyPath=["2","2-1","/disk"],a()}},{path:"/os",name:"os",component:Bt,beforeEnter:function(t,e,a){window.keyPath=["2","2-1","/os"],a()}},{path:"/alarm",name:"alarm",component:$e,beforeEnter:function(t,e,a){window.scrollTo(0,0),window.keyPath=["3","/alarm"],a()}},{path:"/panel",name:"panel",component:_a,beforeEnter:function(t,e,a){window.keyPath=["3","/panel"],a()}},{path:"/instanceGroup",name:"instanceGroup",component:ma,beforeEnter:function(t,e,a){window.keyPath=["3","/instanceGroup"],a()}},{path:"/contacts",name:"contacts",component:qe,beforeEnter:function(t,e,a){window.keyPath=["3","/contacts"],a()}}]}),ya=a("9rMa"),wa={listData:[],tableData:[],key:"name",order:"ascending",Size:"small",winWidth:0,Status:["RESIZE","REBUILD","BUILD","MIGRATING","VERIFY_RESIZE","ERROR","ACTIVE","SHUTOFF","VERIFY_MIGRATING","VERIFY_NOVMMS_RESIZE","NOVMMS_RESIZE","NOVMMS_RESIZE_FAILED"],osType:[{label:"Rhel",value:"Rhel",children:[{label:"rhel-6.8-server_0817",value:"rhel-6.8-server_0817"},{label:"rhel-7.2-server_0817",value:"rhel-7.2-server_0817"},{label:"rhel-7.3-server_0217",value:"rhel-7.3-server_0217"}]},{label:"CentOs",value:"CentOs",children:[{label:"CentOS-6.8-server_1116",value:"CentOS-6.8-server_1116"},{label:"CentOS-7.2-server_1116",value:"CentOS-7.2-server_1116"},{label:"CentOS-7.3-server_0217",value:"CentOS-7.3-server_0217"}]},{label:"Ubuntu",value:"Ubuntu",children:[{label:"ubuntu_0908",value:"ubuntu_0908"}]},{label:"Windows",value:"Windows",children:[{label:"windows-server-mis-2008",value:"windows-server-mis-2008"},{label:"windows-server-mis-2012",value:"windows-server-mis-2012"},{label:"windows-server-mis-2016",value:"windows-server-mis-2016"}]},{label:"Others",value:"Others",children:[{label:"目前未有其他版本",value:"none",disabled:!0}]}],statistic:[{label:"平均值",value:"avg"},{label:"最大值",value:"max"},{label:"最小值",value:"min"},{label:"求和值",value:"sum"}],operators:["==","!=","<","<=",">",">="]},Fa=wa,xa={changeNumber:function(t,e){t.createNum=e},changeSize:function(t){window.innerWidth?t.winWidth=window.innerWidth:document.body&&document.body.clientWidth?t.winWidth=document.body.clientWidth:document.documentElement&&document.documentElement.clientWidth&&(t.winWidth=document.documentElement.clientWidth),t.winWidth>=1440?t.Size="medium":t.winWidth>=1320?t.Size="small":t.Size="mini"},changeData:function(t,e){t.listData=e,t.tableData=e.slice(0)},handleSearch:function(t,e){var a=e.trim();this.currentPage=1,t.tableData=t.listData.filter(function(t){for(var e in t)if(String(t[e])===a)return t})},emptySearch:function(t,e){e||(t.tableData=t.listData.slice(0))},sortChange:function(t,e){e.order&&e.prop&&(t.key===e.prop&&t.order===e.order||(t.key=e.prop,t.order=e.order,"ascending"===t.order?t.tableData.sort(function(e,a){return e[t.key].localeCompare(a[t.key])}):"descending"===t.order&&t.tableData.reverse(function(e,a){return e[t.key].localeCompare(a[t.key])})))}},ka=xa;b.default.use(ya.a);var $a=new ya.a.Store({state:Fa,mutations:ka});a("uxEr"),a("cN2K");b.default.use(y.a),b.default.use(_.a),b.default.config.productionTip=!1,Ca.beforeEach(function(t,e,a){window.scrollTo(0,0),a()}),window.vm=new b.default({el:"#app",router:Ca,store:$a,render:function(t){return t(X)}})},WycM:function(t,e){},cN2K:function(t,e){},cU5d:function(t,e){},h3m5:function(t,e){},ni6K:function(t,e){},rkIT:function(t,e){},t8QQ:function(t,e){},tcJ7:function(t,e){},uxEr:function(t,e){},"v/q9":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e1d6ba05a68cdc2b396b.js.map